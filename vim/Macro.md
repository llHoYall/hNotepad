---
layout: post
title: Macro
category: vim
tags: vim
---

&nbsp;

# Macro

Named Register를 사용하여 반복적인 동작을 녹화한 후, 재사용할 수 있게 해주는 매크로 기능을 사용할 수 있다.

&nbsp;

### Recording

매크로 기록은 N-Mode에서 다음의 명령으로 시작한다.

> q{*register*}

이제 기록할 명령들을 수행한 후, 다음의 명령으로 종료한다.

> q

&nbsp;

### 매크로 실행

기록한 매크로는 언제든지 N-Mode에서 다음의 명령으로 실행할 수 있다.

> @{*register*}

다음의 명령은 바로 이전에 실행한 매크로를 재실행한다.

> @@



C-Mode에서 범위를 지정하여 매크로를 실행할 수도 있다.

> :%normal! @a

위의 예는 문서 전체를 대상으로 N-Mode 명령어인 @a를 실행한다. 즉, a 레지스터에 저장된 매크로를 실행한다.

또한, !에 의해 에러가 발생하더라도 문서 끝까지 작업을 진행한다.

&nbsp;

### 매크로 수정

매크로의 내용을 수정하려면 레지스터의 내용을 편집하는 방법을 사용한다.

> "ap		# a 레지스터의 내용을 붙여넣는다.
>
> ...		# 내용을 편집한다.
>
> ^"ay$	# 라인의 맨 앞으로 가서 현재 라인의 내용을 a 레지스터에 복사한다.
>
> dd		# 현재 라인을 삭제한다.

기존 매크로의 내용을 추가할 때는, 레지스터의 이름을 대문자로 하여 기록한다.